<?php
/**
 * @file
 * ecofolio_users.rules_defaults.inc
 */

/**
 * Implements hook_default_rules_configuration().
 */
function ecofolio_users_default_rules_configuration() {
  $items = array();
  $items['rules_auto_assign_role_administration'] = entity_import('rules_config', '{ "rules_auto_assign_role_administration" : {
      "LABEL" : "Auto assign role administration",
      "PLUGIN" : "reaction rule",
      "WEIGHT" : "1",
      "OWNER" : "rules",
      "REQUIRES" : [ "rules" ],
      "ON" : { "user_update" : [] },
      "IF" : [
        { "data_is" : {
            "data" : [ "account:field-roles" ],
            "value" : "Conseil d\\u0027administration"
          }
        },
        { "AND" : [] },
        { "NOT user_has_role" : {
            "account" : [ "account" ],
            "roles" : { "value" : {
                "1" : "1",
                "3" : "3",
                "4" : "4",
                "5" : "5",
                "6" : "6",
                "7" : "7",
                "8" : "8"
              }
            },
            "operation" : "OR"
          }
        },
        { "AND" : [] },
        { "NOT user_is_blocked" : { "account" : [ "account" ] } }
      ],
      "DO" : [
        { "user_add_role" : { "account" : [ "account" ], "roles" : { "value" : { "8" : "8" } } } }
      ]
    }
  }');
  $items['rules_auto_assign_role_collectivite'] = entity_import('rules_config', '{ "rules_auto_assign_role_collectivite" : {
      "LABEL" : "Auto assign role collectivite",
      "PLUGIN" : "reaction rule",
      "OWNER" : "rules",
      "REQUIRES" : [ "rules" ],
      "ON" : { "user_insert" : [] },
      "IF" : [
        { "data_is" : { "data" : [ "account:field-roles" ], "value" : "Collectivit\\u00e9" } }
      ],
      "DO" : [
        { "user_add_role" : { "account" : [ "account" ], "roles" : { "value" : { "6" : "6" } } } }
      ]
    }
  }');
  $items['rules_auto_assign_role_entreprise'] = entity_import('rules_config', '{ "rules_auto_assign_role_entreprise" : {
      "LABEL" : "Auto assign role entreprise",
      "PLUGIN" : "reaction rule",
      "OWNER" : "rules",
      "REQUIRES" : [ "rules" ],
      "ON" : { "user_insert" : [] },
      "IF" : [
        { "data_is" : { "data" : [ "account:field-roles" ], "value" : "Entreprise" } }
      ],
      "DO" : [
        { "user_add_role" : { "account" : [ "account" ], "roles" : { "value" : { "4" : "4" } } } }
      ]
    }
  }');
  $items['rules_auto_assign_role_jeunesse'] = entity_import('rules_config', '{ "rules_auto_assign_role_jeunesse" : {
      "LABEL" : "Auto assign role jeunesse",
      "PLUGIN" : "reaction rule",
      "OWNER" : "rules",
      "REQUIRES" : [ "rules" ],
      "ON" : { "user_insert" : [] },
      "IF" : [
        { "data_is" : { "data" : [ "account:field-roles" ], "value" : "Jeunesse" } }
      ],
      "DO" : [
        { "user_add_role" : { "account" : [ "account" ], "roles" : { "value" : { "7" : "7" } } } }
      ]
    }
  }');
  $items['rules_auto_assign_role_repreneur'] = entity_import('rules_config', '{ "rules_auto_assign_role_repreneur" : {
      "LABEL" : "Auto assign role repreneur",
      "PLUGIN" : "reaction rule",
      "OWNER" : "rules",
      "REQUIRES" : [ "rules" ],
      "ON" : { "user_insert" : [] },
      "IF" : [
        { "data_is" : { "data" : [ "account:field-roles" ], "value" : "Repreneur" } }
      ],
      "DO" : [
        { "user_add_role" : { "account" : [ "account" ], "roles" : { "value" : { "5" : "5" } } } }
      ]
    }
  }');
  $items['rules_block_account_conseil_administration'] = entity_import('rules_config', '{ "rules_block_account_conseil_administration" : {
      "LABEL" : "Block account conseil administration",
      "PLUGIN" : "reaction rule",
      "OWNER" : "rules",
      "REQUIRES" : [ "rules" ],
      "ON" : { "user_insert" : [] },
      "IF" : [
        { "data_is" : {
            "data" : [ "account:field-roles" ],
            "value" : "Conseil d\\u0027administration"
          }
        }
      ],
      "DO" : [ { "user_block" : { "account" : [ "account" ] } } ]
    }
  }');
  $items['rules_create_account_conseil_administration'] = entity_import('rules_config', '{ "rules_create_account_conseil_administration" : {
      "LABEL" : "Create account conseil administration",
      "PLUGIN" : "reaction rule",
      "OWNER" : "rules",
      "REQUIRES" : [ "rules" ],
      "ON" : { "user_insert" : [] },
      "IF" : [
        { "user_has_role" : { "account" : [ "account" ], "roles" : { "value" : { "8" : "8" } } } }
      ],
      "DO" : [
        { "user_send_account_email" : { "account" : [ "account" ], "email_type" : "status_canceled" } },
        { "user_block" : { "account" : [ "account" ] } }
      ]
    }
  }');
  return $items;
}
