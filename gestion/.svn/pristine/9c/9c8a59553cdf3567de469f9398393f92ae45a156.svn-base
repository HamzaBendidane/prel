<?php

/**
 * Implements hook_menu().
 */
function dgf_contrat_pro_menu() {
  $items = array();

    $items['dgf/demande/contrat-pro/stagiaire'] = array(
        'title' =>  t('Etape stagiaire' ),
        'page callback' => 'dgf_stagiaire_view',
        'access arguments' => array('SAI_DGF_CP'),
        'access callback' => '_dgf_access_callback',
        'type' => MENU_NORMAL_ITEM,
    );

  $items['dgf/demande/contrat-pro/tuteur'] = array(
      'title' => t('Etape tuteur' ),
      'page callback' => 'dgf_contrat_pro_tuteur_view',
      'access arguments' => array('SAI_DGF_CP'),
      'access callback' => '_dgf_access_callback',
      'type' => MENU_NORMAL_ITEM);

  $items['dgf/demande/contrat-pro/cerfa'] = array(
      'title' => t('Etape Cerfa' ),
      'page callback' => 'dgf_contrat_pro_cerfa_view',
      'access arguments' => array('SAI_DGF_CP'),
      'access callback' => '_dgf_access_callback',
      'type' => MENU_NORMAL_ITEM);


  $items['autocomplete/get-salarie-from-name'] = array(
    'title' => t('Liste des salariés correspondant au nom donné' ),
    'page callback' => 'stagiaire_get_salarie_from_name',
    'access callback' => '_dgf_access_callback',
    'file' => 'inc/stagiaire/stagiaire_db.inc',
    'type' => MENU_CALLBACK
  );

  return $items;
}
function dgf_stagiaire_view() {
    require_once 'inc/stagiaire/stagiaire_form.inc';

    $variables =  array(
        'stagiaire'=> drupal_get_form('dgf_contrat_pro_stagiaire_form')
    );

    $output = theme('dgf_stagiaire_theme', $variables);

    return $output;
}

function dgf_contrat_pro_tuteur_view() {
    require_once 'inc/tuteur/tuteur_form.inc';

    $variables =  array(
        'tuteur'=> drupal_get_form('dgf_contrat_pro_tuteur_form')
    );

    $output = theme('dgf_contrat_pro_tuteur_theme', $variables);

    return $output;
}

function dgf_contrat_pro_cerfa_view() {
    require_once 'inc/cerfa/cerfa_form.inc';

    $variables =  array(
            'cerfa'=> drupal_get_form('dgf_contrat_pro_cerfa_form')
    );

    $output = theme('dgf_contrat_pro_cerfa_theme', $variables);

    return $output;
}

function dgf_contrat_pro_theme($existing, $type, $theme, $path) {
    return array(

        'dgf_stagiaire_theme' => array(
            'variables' => array(),
            'render element' => 'element',
            'template' => 'dgf_stagiaire',
            'path' => drupal_get_path('module', 'dgf_contrat_pro') .'/theme',
        ),
        'dgf_contrat_pro_tuteur_theme' => array(
            'variables' => array(),
            'render element' => 'element',
            'template' => 'dgf_contrat_pro_tuteur',
            'path' => drupal_get_path('module', 'dgf_contrat_pro') .'/theme',
        ),
        'dgf_contrat_pro_cerfa_theme' => array(
            'variables' => array(),
            'render element' => 'element',
            'template' => 'dgf_contrat_pro_cerfa',
            'path' => drupal_get_path('module', 'dgf_contrat_pro') .'/theme',
        ),
    );
}