<?php

/**
 * Submit for the trainee step
 *
 * @param type $form
 * @param type $form_state
 */
function dgf_demande_form_submit($form, &$form_state)
{
    if (arg(2)){
        $id_dgf = shared_security_access_user(2, 'DGF');
    }
  if ($form_state['triggering_element']['#id'] == 'edit-next') {
   //a rajouter à la transmission de tous les formulaires
    $_SESSION['demande']['nature_demande'] = $form_state['values']['nature_demande'];
    $_SESSION['demande']['nature_formation'] = $form_state['values']['nature_formation'];
    if ($form_state['values']['nature_demande'] == 1) {
      if (arg(2)) {
        drupal_goto('/dgf/demande/contrat-pro/stagiaire/'.$id_dgf);
      } else {
        drupal_goto('/dgf/demande/contrat-pro/stagiaire');
      }
    } else {
     
      drupal_goto('/dgf/demande/',
      array('query' => array('modal' => 'modal_quit')));
//       drupal_set_message('Seul les demandes de contrat pro sont implémentées', 'info');
    }
  }
}

function dgf_demande_form_modal_submit ($form, &$form_state)
{

  $_SESSION['demande']['nature_demande'] = $form_state['values']['nature_demande'];
  $_SESSION['demande']['nature_formation'] = $form_state['values']['nature_formation'];
  $_SESSION['demande']['multi_etab']= $form_state['values']['liste_multi-etablissement'];
  
}